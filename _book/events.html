<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Events | Writing technical reports of any economic analysis in R with bookdown</title>
  <meta name="description" content="3 Events | Writing technical reports of any economic analysis in R with bookdown" />
  <meta name="generator" content="bookdown 0.25 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Events | Writing technical reports of any economic analysis in R with bookdown" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Events | Writing technical reports of any economic analysis in R with bookdown" />
  
  
  

<meta name="author" content="FW Thielen" />


<meta name="date" content="2022-05-22" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="general-inputs-with-delayed-execution.html"/>
<link rel="next" href="costs-and-utilities.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="preface.html#preface">Preface<span></span></a>
<ul>
<li><a href="preface.html#setup">Setup<span></span></a></li>
<li><a href="preface.html#other">Other<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction<span></span></a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#main-options"><i class="fa fa-check"></i><b>1.1</b> Main options<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="general-inputs-with-delayed-execution.html"><a href="general-inputs-with-delayed-execution.html"><i class="fa fa-check"></i><b>2</b> General inputs with delayed execution<span></span></a></li>
<li class="chapter" data-level="3" data-path="events.html"><a href="events.html"><i class="fa fa-check"></i><b>3</b> Events<span></span></a>
<ul>
<li class="chapter" data-level="3.1" data-path="events.html"><a href="events.html#add-initial-events"><i class="fa fa-check"></i><b>3.1</b> Add Initial Events<span></span></a></li>
<li class="chapter" data-level="3.2" data-path="events.html"><a href="events.html#add-reaction-to-those-events"><i class="fa fa-check"></i><b>3.2</b> Add Reaction to Those Events<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="costs-and-utilities.html"><a href="costs-and-utilities.html"><i class="fa fa-check"></i><b>4</b> Costs and Utilities<span></span></a>
<ul>
<li class="chapter" data-level="4.1" data-path="costs-and-utilities.html"><a href="costs-and-utilities.html#utilities"><i class="fa fa-check"></i><b>4.1</b> Utilities<span></span></a></li>
<li class="chapter" data-level="4.2" data-path="costs-and-utilities.html"><a href="costs-and-utilities.html#costs"><i class="fa fa-check"></i><b>4.2</b> Costs<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="model.html"><a href="model.html"><i class="fa fa-check"></i><b>5</b> Model<span></span></a>
<ul>
<li class="chapter" data-level="5.1" data-path="model.html"><a href="model.html#model-execution"><i class="fa fa-check"></i><b>5.1</b> Model Execution<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="post-processing-of-model-outputs.html"><a href="post-processing-of-model-outputs.html"><i class="fa fa-check"></i><b>6</b> Post-processing of Model Outputs<span></span></a>
<ul>
<li class="chapter" data-level="6.1" data-path="post-processing-of-model-outputs.html"><a href="post-processing-of-model-outputs.html#summary-of-results"><i class="fa fa-check"></i><b>6.1</b> Summary of Results<span></span></a></li>
<li class="chapter" data-level="6.2" data-path="post-processing-of-model-outputs.html"><a href="post-processing-of-model-outputs.html#plots"><i class="fa fa-check"></i><b>6.2</b> Plots<span></span></a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>7</b> References<span></span></a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Writing technical reports of any economic analysis in R with <strong>bookdown</strong></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="events" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">3</span> Events<a href="events.html#events" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="add-initial-events" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Add Initial Events<a href="events.html#add-initial-events" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Events are added below through the <code>add_tte</code> function. We use this function twice, one per intervention. We must define several arguments: one to indicate the intervention, one to define the names of the events used, one to define the names of other objects created that we would like to store (optional, maybe we generate an intermediate input which is not an event but that we want to save) and the actual input in which we generate the time to event. Events and other objects will be automatically initialized to <code>Inf</code>. We draw the times to event for the patients. This chunk is a bit more complex, so it’s worth spending a bit of time explaining it.</p>
<p>The <code>init_event_list</code> object is populated by using the <code>add_tte</code> function twice, one for the “int” strategy and other for the “noint” strategy. We first declare the <code>start</code> time to be <code>0</code>.</p>
<p>We then proceed to generate the actual time to event. We use the <code>draw_tte()</code> function to generate the time to event. One should always be aware of how the competing risks interact with each other. While we have abstracted from these type of corrections here, it is recommended to have an understanding about how these affect the results and have a look at the competing risks/semi-competing risks literature.</p>
</div>
<div id="add-reaction-to-those-events" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Add Reaction to Those Events<a href="events.html#add-reaction-to-those-events" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Once the initial times of the events have been defined, we also need to declare how events react and affect each other. To do so, we use the <code>evt_react_list</code> object and the <code>add_reactevt</code> function. This function just needs to state which event is affected, and the actual reaction (usually setting flags to 1 or 0, or creating new/adjusting events).</p>
<p>There are a series of objects that can be used in this context to help with the reactions. Apart from the global objects and flags defined above, we can also use <code>curtime</code> for the current event time, <code>prevtime</code> for the time of the previous event, <code>cur_evtlist</code> for the named vector of events that is yet to happen for that patient, trt for the current treatment in the loop, <code>evt</code> for the current event being processed, <code>i</code> expresses the patient iteration, and <code>simulation</code> the specific simulation (relevant when the number of simulations is greater than 1). Furthermore, one can also call any other input/item that has been created before or create new ones. For example, we could even modify a cost/utility item by changing it directly, e.g. through <code>modify_item(list(cost.idfs.tx=500))</code>.</p>
<p>At this place, a Table is rendered in the HTML version of the tutorial.
In this document, Tables are automatically numbered and cross-referenced. For this
to work, the R-code chunk need to have a:</p>
<ul>
<li><em>unique</em> name (avoid underscores <code>_</code>)</li>
<li>the table needs to have a caption, passed in the <code>kintr::kable()</code> option.</li>
</ul>
<p>Table <a href="events.html#tab:tab-1">3.1</a> below shows a standard output with a pre-specified
theme form the package <strong>kableExtra</strong> (Version 1.3.4).<span class="citation"><sup><a href="#ref-bookdown2016" role="doc-biblioref">1</a></sup></span></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="events.html#cb3-1" aria-hidden="true" tabindex="-1"></a>tab1 <span class="ot">&lt;-</span> openxlsx<span class="sc">::</span><span class="fu">read.xlsx</span>(<span class="at">xlsxFile =</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;raw/table1.xlsx&quot;</span>),</span>
<span id="cb3-2"><a href="events.html#cb3-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">sheet =</span> <span class="st">&quot;table1&quot;</span>)</span>
<span id="cb3-3"><a href="events.html#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="events.html#cb3-4" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">x =</span> tab1,</span>
<span id="cb3-5"><a href="events.html#cb3-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">&quot;Item&quot;</span>, <span class="st">&quot;What does it do&quot;</span>),</span>
<span id="cb3-6"><a href="events.html#cb3-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">caption =</span> <span class="st">&quot;Table without caption in original tutorial&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-7"><a href="events.html#cb3-7" aria-hidden="true" tabindex="-1"></a>        kableExtra<span class="sc">::</span><span class="fu">kable_classic</span>() </span></code></pre></div>
<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:tab-1">Table 3.1: </span>Table without caption in original tutorial
</caption>
<thead>
<tr>
<th style="text-align:left;">
Item
</th>
<th style="text-align:left;">
What does it do
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
curtime
</td>
<td style="text-align:left;">
Current event time (numeric)
</td>
</tr>
<tr>
<td style="text-align:left;">
prevtime
</td>
<td style="text-align:left;">
Time of the previous event (numeric)
</td>
</tr>
<tr>
<td style="text-align:left;">
cur_evtlist
</td>
<td style="text-align:left;">
Named vector of events that is yet to happen for that patient (named numeric vector)
</td>
</tr>
<tr>
<td style="text-align:left;">
evt
</td>
<td style="text-align:left;">
Current event being processed (character)
</td>
</tr>
<tr>
<td style="text-align:left;">
i
</td>
<td style="text-align:left;">
Patient being iterated (character)
</td>
</tr>
<tr>
<td style="text-align:left;">
simulation
</td>
<td style="text-align:left;">
Simulation being iterated (numeric)
</td>
</tr>
</tbody>
</table>
<p>The problem with rendering tables in that way it that they sometimes do not
render at the exact place where you want them. Also, they don’t look very nice
and when they are wide, they don’t fit.</p>
<p>Below I share two functions (after a lot of trial and error) that work quite well
for both HTML and PDF output. Feel free to use and re-use:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="events.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A wrapper for the kintr::kable() function</span></span>
<span id="cb4-2"><a href="events.html#cb4-2" aria-hidden="true" tabindex="-1"></a>fkbl <span class="ot">&lt;-</span> <span class="cf">function</span> (df, <span class="at">digi =</span> <span class="dv">2</span>, <span class="at">big_mark =</span> <span class="cn">TRUE</span>, <span class="at">col.names =</span> <span class="fu">names</span>(df), ...) </span>
<span id="cb4-3"><a href="events.html#cb4-3" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb4-4"><a href="events.html#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">require</span>(<span class="st">&quot;dplyr&quot;</span>)</span>
<span id="cb4-5"><a href="events.html#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">require</span>(<span class="st">&quot;kableExtra&quot;</span>)</span>
<span id="cb4-6"><a href="events.html#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (knitr<span class="sc">::</span><span class="fu">pandoc_to</span>(<span class="st">&quot;docx&quot;</span>)) {</span>
<span id="cb4-7"><a href="events.html#cb4-7" aria-hidden="true" tabindex="-1"></a>        df <span class="sc">%&gt;%</span> flextable<span class="sc">::</span><span class="fu">flextable</span>() <span class="sc">%&gt;%</span> flextable<span class="sc">::</span><span class="fu">colformat_double</span>(<span class="at">x =</span> ., </span>
<span id="cb4-8"><a href="events.html#cb4-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">big.mark =</span> <span class="fu">ifelse</span>(big_mark, <span class="st">&quot;,&quot;</span>, <span class="st">&quot;&quot;</span>), <span class="at">digits =</span> digi)</span>
<span id="cb4-9"><a href="events.html#cb4-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb4-10"><a href="events.html#cb4-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> {</span>
<span id="cb4-11"><a href="events.html#cb4-11" aria-hidden="true" tabindex="-1"></a>        df <span class="sc">%&gt;%</span> kableExtra<span class="sc">::</span><span class="fu">kbl</span>(<span class="at">col.names =</span> col.names, <span class="at">digits =</span> digi, </span>
<span id="cb4-12"><a href="events.html#cb4-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">booktabs =</span> <span class="cn">TRUE</span>, <span class="at">linesep =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb4-13"><a href="events.html#cb4-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">format.args =</span> <span class="fu">list</span>(<span class="at">big.mark =</span> <span class="fu">ifelse</span>(big_mark, </span>
<span id="cb4-14"><a href="events.html#cb4-14" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;,&quot;</span>, <span class="st">&quot;&quot;</span>)), ...)</span>
<span id="cb4-15"><a href="events.html#cb4-15" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb4-16"><a href="events.html#cb4-16" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="events.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A wrapper for kable::Extra::kable_styling()</span></span>
<span id="cb5-2"><a href="events.html#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="events.html#cb5-3" aria-hidden="true" tabindex="-1"></a>fkbl_style <span class="ot">&lt;-</span> <span class="cf">function</span> (fkbl, <span class="at">scale =</span> <span class="cn">FALSE</span>, <span class="at">boots_opts =</span> <span class="fu">c</span>(<span class="st">&quot;striped&quot;</span>,</span>
<span id="cb5-4"><a href="events.html#cb5-4" aria-hidden="true" tabindex="-1"></a>                                                            <span class="st">&quot;condensed&quot;</span>,</span>
<span id="cb5-5"><a href="events.html#cb5-5" aria-hidden="true" tabindex="-1"></a>                                                            <span class="st">&quot;hover&quot;</span>),</span>
<span id="cb5-6"><a href="events.html#cb5-6" aria-hidden="true" tabindex="-1"></a>                        <span class="at">latx_opts =</span> <span class="fu">c</span>(<span class="st">&quot;striped&quot;</span>, <span class="st">&quot;HOLD_position&quot;</span>), ...) </span>
<span id="cb5-7"><a href="events.html#cb5-7" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb5-8"><a href="events.html#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">require</span>(<span class="st">&quot;kableExtra&quot;</span>)</span>
<span id="cb5-9"><a href="events.html#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (knitr<span class="sc">::</span><span class="fu">pandoc_to</span>(<span class="st">&quot;docx&quot;</span>)) {</span>
<span id="cb5-10"><a href="events.html#cb5-10" aria-hidden="true" tabindex="-1"></a>        fkbl</span>
<span id="cb5-11"><a href="events.html#cb5-11" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb5-12"><a href="events.html#cb5-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> {</span>
<span id="cb5-13"><a href="events.html#cb5-13" aria-hidden="true" tabindex="-1"></a>        fkbl <span class="sc">%&gt;%</span> kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> boots_opts, </span>
<span id="cb5-14"><a href="events.html#cb5-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">latex_options =</span> <span class="cf">if</span> (scale) {</span>
<span id="cb5-15"><a href="events.html#cb5-15" aria-hidden="true" tabindex="-1"></a>                <span class="fu">c</span>(latx_opts, <span class="st">&quot;scale_down&quot;</span>)</span>
<span id="cb5-16"><a href="events.html#cb5-16" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb5-17"><a href="events.html#cb5-17" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span> {</span>
<span id="cb5-18"><a href="events.html#cb5-18" aria-hidden="true" tabindex="-1"></a>                latx_opts</span>
<span id="cb5-19"><a href="events.html#cb5-19" aria-hidden="true" tabindex="-1"></a>            }, <span class="at">full_width =</span> F, ...) <span class="sc">%&gt;%</span> kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(., </span>
<span id="cb5-20"><a href="events.html#cb5-20" aria-hidden="true" tabindex="-1"></a>            <span class="at">width =</span> <span class="st">&quot;100%&quot;</span>, <span class="at">box_css =</span> <span class="st">&quot;border: 0px;&quot;</span>)</span>
<span id="cb5-21"><a href="events.html#cb5-21" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb5-22"><a href="events.html#cb5-22" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="events.html#cb6-1" aria-hidden="true" tabindex="-1"></a>tab1 <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a href="events.html#cb6-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">fkbl</span>(<span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">&quot;Item&quot;</span>, <span class="st">&quot;What does it do&quot;</span>),</span>
<span id="cb6-3"><a href="events.html#cb6-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">caption =</span> <span class="st">&quot;Table without caption in original tutorial2&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb6-4"><a href="events.html#cb6-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">fkbl_style</span>(<span class="at">scale =</span> T)</span></code></pre></div>
<div style="border: 0px;overflow-x: scroll; width:100%; ">
<table class="table table-striped table-condensed table-hover" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:tab-2">Table 3.2: </span>Table without caption in original tutorial2
</caption>
<thead>
<tr>
<th style="text-align:left;">
Item
</th>
<th style="text-align:left;">
What does it do
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
curtime
</td>
<td style="text-align:left;">
Current event time (numeric)
</td>
</tr>
<tr>
<td style="text-align:left;">
prevtime
</td>
<td style="text-align:left;">
Time of the previous event (numeric)
</td>
</tr>
<tr>
<td style="text-align:left;">
cur_evtlist
</td>
<td style="text-align:left;">
Named vector of events that is yet to happen for that patient (named numeric vector)
</td>
</tr>
<tr>
<td style="text-align:left;">
evt
</td>
<td style="text-align:left;">
Current event being processed (character)
</td>
</tr>
<tr>
<td style="text-align:left;">
i
</td>
<td style="text-align:left;">
Patient being iterated (character)
</td>
</tr>
<tr>
<td style="text-align:left;">
simulation
</td>
<td style="text-align:left;">
Simulation being iterated (numeric)
</td>
</tr>
</tbody>
</table>
</div>
<p>The functions to add/modify events and inputs use lists. Whenever several inputs/events are added or modified, it’s recommended to group them within one function, as it reduces the computation cost. So rather than use two <code>modify_item</code> with a list of one element, it’s better to group them into a single <code>modify_item</code> with a list of two elements.</p>
<p><code>new_event</code> allows to generate events and add them to the vector of events. It accepts more than one event. <code>modify_event</code> allows to modify events (e.g. delay death). When adding an event, the name of the events and the time of the events must be defined. When using <code>modify_event</code>, one must indicate which events are affected and what are the new times of the events. If the event specified does not exist or has already occurred, it will be ignored. Note that one could potentially omit part of the modeling set in <code>init_event_list</code> and actually define new events dynamically through the reactions (we do that below for the <code>"ae"</code> event). However, this can have an impact in computation time, so if possible it’s always better to use <code>init_event_list.</code> <code>modify_item</code> allows to modify and add items. Elements defined within this function are not evaluated sequentially (i.e. defining <code>modify_item(list(fl.new = 1, var1 = fl.new * 5)))</code> will give an error if <code>fl.new</code> was not defined outside this function).</p>
<p>The list of relevant functions to be used within <code>add_reactevt</code> are (shown in
Table <a href="events.html#tab:tab2">3.3</a>):</p>
<div style="border: 0px;overflow-x: scroll; width:100%; ">
<table class="table table-striped table-condensed table-hover" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:tab2">Table 3.3: </span>Another table with no caption
</caption>
<thead>
<tr>
<th style="text-align:left;">
Function
</th>
<th style="text-align:left;">
What does it do
</th>
<th style="text-align:left;">
How to use it
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
modify_item()
</td>
<td style="text-align:left;">
Adds &amp; Modifies items/flags/variables for future events
</td>
<td style="text-align:left;">
modify_item(list(“fl.idfs.ontx”=0,“fl.tx.beva”=0))
</td>
</tr>
<tr>
<td style="text-align:left;">
new_event()
</td>
<td style="text-align:left;">
Adds events to the vector of events for that patient
</td>
<td style="text-align:left;">
new_event(rep(list(“ae”=curtime + 0.001),5))
</td>
</tr>
<tr>
<td style="text-align:left;">
modify_event()
</td>
<td style="text-align:left;">
Modifies existing events by changing their time
</td>
<td style="text-align:left;">
modify_event(list(“os”=curtime +5, “ttot”=curtime+0.0001))
</td>
</tr>
</tbody>
</table>
</div>
<p>The model will run until <code>curtime</code> is set to <code>Inf</code>, so the event that terminates the model (in this case, <code>os</code>), should modify <code>curtime</code> and set it to <code>Inf.</code></p>

</div>
</div>
<h3> References<a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body" line-spacing="2">
<div id="ref-bookdown2016" class="csl-entry">
<div class="csl-left-margin">1. </div><div class="csl-right-inline">Xie, Y. <em><a href="https://bookdown.org/yihui/bookdown">Bookdown: Authoring books and technical documents with <span>R</span> markdown</a></em>. (Chapman; Hall/CRC, 2016).</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="general-inputs-with-delayed-execution.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="costs-and-utilities.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["220523-thielen-r_for_hta.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
